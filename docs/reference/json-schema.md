# JSON Output Schema

This document describes the schema for the JSON output generated by AppDoc.

## Overview

AppDoc generates a comprehensive summary in JSON format that can be consumed by other tools, CI/CD pipelines, or processed programmatically.

## Top-Level Structure

```json
{
  "schema_version": "1.0",
  "scan_info": {
    // Scan metadata
  },
  "languages": {
    // Per-language summaries
  },
  "files": [
    // Per-file details
  ],
  "dependency_graph": {
    // NetworkX graph data for dependency visualization
  }
}
```

## scan_info Object

Contains metadata about the scan operation.

| Field | Type | Description |
|-------|------|-------------|
| `timestamp` | string | ISO 8601 timestamp when the scan was performed |
| `scan_path` | string | Absolute path to the scanned directory |
| `duration_seconds` | number | Time taken for the scan in seconds |
| `total_files` | integer | Total number of files processed |
| `total_lines` | integer | Total lines of code across all files |
| `overall_coverage` | number | Overall documentation coverage percentage (0.0-100.0) |

## languages Object

Language breakdown with statistics for each supported programming language.

Each language entry has the following structure:

| Field | Type | Description |
|-------|------|-------------|
| `files` | integer | Number of files analyzed for this language |
| `lines` | integer | Total lines of code in files of this language |
| `functions` | integer | Total functions/methods found |
| `documented_functions` | integer | Functions with documentation |
| `classes` | integer | Total classes found |
| `documented_classes` | integer | Classes with documentation |
| `coverage_percentage` | number | Documentation coverage for this language (0.0-100.0) |

## files Array

Detailed information for each analyzed file.

### File Object Structure

| Field | Type | Description |
|-------|------|-------------|
| `path` | string | Relative path to the file from scan root |
| `language` | string | Programming language (python, javascript, etc.) |
| `lines` | integer | Total lines in the file |
| `functions` | integer | Number of functions/methods |
| `documented_functions` | integer | Number of documented functions |
| `classes` | integer | Number of classes |
| `documented_classes` | integer | Number of documented classes |
| `coverage_percentage` | number | Documentation coverage for this file (0.0-100.0) |
| `dependencies` | array of strings | List of imported/required modules |
| `complexity` | null or number | Code complexity metric (reserved for future use) |

## Sample Output

See the [sample summary JSON](../assets/sample-summary.json) for a complete example output.

## Usage Examples

### Calculate Average Coverage per Language

```javascript
const data = JSON.parse(fs.readFileSync('summary.json', 'utf8'));
for (const [lang, stats] of Object.entries(data.languages)) {
  console.log(`${lang}: ${stats.coverage_percentage.toFixed(1)}%`);
}
```

### Find Files with Lowest Coverage

```python
import json
with open('summary.json') as f:
    data = json.load(f)

low_coverage = sorted(
    [f for f in data['files'] if f['coverage_percentage'] < 50],
    key=lambda x: x['coverage_percentage']
)
for file in low_coverage:
    print(f"{file['path']}: {file['coverage_percentage']:.1f}%")
```

### Generate Coverage Report

```bash
# Extract overall metrics
jq '.scan_info | {total_files, total_lines, overall_coverage}' summary.json
```

## Schema Versioning

This schema is versioned alongside AppDoc releases. Breaking changes will be documented in the changelog.

- **v1.0**: Initial schema with basic metrics
- **Future versions**: May add new fields for advanced analysis (complexity, dead code, etc.)

For questions or feature requests regarding the JSON output, please create an issue on GitHub.
